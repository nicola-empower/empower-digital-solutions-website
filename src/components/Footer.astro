---
import {
  Facebook,
  Linkedin,
  Mail,
  MapPin,
  Phone,
  Download,
  Clock,
} from "lucide-react";
import { Image } from "astro:assets";
import logoImage from "../assets/images/logo.jpg";

const currentYear = new Date().getFullYear();
---

<footer class="bg-slate-900 text-white pt-16 pb-8 border-t border-slate-800">
  <div class="container mx-auto px-6">
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
      <!-- Column 1: Brand -->
      <div>
        <div class="flex items-center gap-3 mb-6">
          <Image
            src={logoImage}
            alt="Empower Digital Solutions"
            class="h-12 w-12 rounded-full border-2 border-empower-pink"
            width={96}
            height={96}
          />
          <span class="font-heading font-bold text-xl"
            >Empower Digital Solutions</span
          >
        </div>
        <p class="text-gray-400 mb-6 leading-relaxed">
          Custom Code & Scale. We engineer bespoke digital solutions that help
          your business grow, automate, and succeed.
        </p>
        <div class="flex gap-4 mb-6">
          <a
            href="https://www.linkedin.com/in/empowervaservices"
            target="_blank"
            rel="noopener noreferrer"
            class="bg-slate-800 p-2 rounded-full hover:bg-empower-pink transition-colors group"
            aria-label="Follow us on LinkedIn"
          >
            <Linkedin
              className="w-5 h-5 text-gray-300 group-hover:text-white"
            />
          </a>
          <a
            href="mailto:nicola@empowerdigitalsolutions.co.uk"
            class="bg-slate-800 p-2 rounded-full hover:bg-empower-pink transition-colors group"
            aria-label="Email Us"
          >
            <Mail className="w-5 h-5 text-gray-300 group-hover:text-white" />
          </a>
        </div>

        <button
          id="installApp"
          class="hidden items-center gap-2 bg-slate-800 text-gray-300 px-4 py-2 rounded-lg hover:bg-empower-pink hover:text-white transition-all text-sm font-semibold group"
        >
          <Download className="w-4 h-4" />
          Install App
        </button>
      </div>
      <!-- Column 2: Quick Links -->
      <div>
        <h3 class="font-bold text-lg mb-6 text-empower-pink">Quick Links</h3>
        <ul class="space-y-3">
          <li>
            <a href="/" class="text-gray-400 hover:text-white transition-colors"
              >Home</a
            >
          </li>
          <li>
            <a
              href="/services"
              class="text-gray-400 hover:text-white transition-colors"
              >Services</a
            >
          </li>
          <li>
            <a
              href="/pricing"
              class="text-gray-400 hover:text-white transition-colors"
              >Pricing</a
            >
          </li>
          <li>
            <a
              href="/aesthetic-vault"
              class="text-gray-400 hover:text-white transition-colors"
              >The Aesthetic Vault</a
            >
          </li>
          <li>
            <a
              href="/design-process"
              class="text-gray-400 hover:text-white transition-colors"
              >Our Process</a
            >
          </li>
          <li>
            <a
              href="/digitalplanner"
              class="text-gray-400 hover:text-white transition-colors"
              >Case Study: Planner</a
            >
          </li>
          <li>
            <a
              href="/contact"
              class="text-gray-400 hover:text-white transition-colors"
              >Contact</a
            >
          </li>
        </ul>
      </div>

      <!-- Column 3: Services -->
      <div>
        <h3 class="font-bold text-lg mb-6 text-empower-pink">Our Services</h3>
        <ul class="space-y-3">
          <li>
            <a
              href="/trades"
              class="text-gray-400 hover:text-white transition-colors"
              >Trades & Construction</a
            >
          </li>
          <li>
            <a
              href="/web-design"
              class="text-gray-400 hover:text-white transition-colors"
              >Bespoke Web Design</a
            >
          </li>
          <li>
            <a
              href="/mvp-development"
              class="text-gray-400 hover:text-white transition-colors"
              >MVP Development</a
            >
          </li>
          <li>
            <a
              href="/customwebapps"
              class="text-gray-400 hover:text-white transition-colors"
              >Custom Web Applications</a
            >
          </li>
          <li>
            <a
              href="/consulting"
              class="text-gray-400 hover:text-white transition-colors"
              >Digital Consulting</a
            >
          </li>
          <li>
            <a
              href="/website-health-checker"
              class="text-gray-400 hover:text-white transition-colors text-xs opacity-70"
              >Free Health Checker</a
            >
          </li>
        </ul>
      </div>

      <!-- Column 4: Contact -->
      <div>
        <h3 class="font-bold text-lg mb-6 text-empower-pink">Contact Us</h3>
        <ul class="space-y-4">
          <li class="flex items-start gap-3 text-gray-400">
            <Mail className="w-5 h-5 text-empower-pink mt-1 shrink-0" />
            <a
              href="mailto:nicola@empowerdigitalsolutions.co.uk"
              class="hover:text-white transition-colors break-all"
              >nicola@empowerdigitalsolutions.co.uk</a
            >
          </li>
          <li class="flex items-start gap-3 text-gray-400">
            <MapPin className="w-5 h-5 text-empower-pink mt-1 shrink-0" />
            <span>Stenhousemuir, Scotland</span>
          </li>
          <li class="flex items-start gap-3 text-gray-400">
            <Clock className="w-5 h-5 text-empower-pink mt-1 shrink-0" />
            <span>10am - 6pm, Mon - Fri</span>
          </li>
          <li
            class="flex items-start gap-3 text-gray-400 pt-2 border-t border-slate-800 mt-2"
          >
            <a
              href="https://portfolio-nicola-berry.vercel.app/"
              target="_blank"
              rel="noopener noreferrer"
              class="hover:text-white transition-colors flex items-center gap-2"
            >
              <span class="w-2 h-2 rounded-full bg-empower-pink inline-block"
              ></span>
              View Our Portfolio
            </a>
          </li>
          <li>
            <a
              href="/admin"
              class="text-gray-500 hover:text-white transition-colors text-xs flex items-center gap-2"
            >
              Admin Login
            </a>
          </li>
          <li>
            <a
              href="/portal"
              class="text-gray-500 hover:text-white transition-colors text-xs flex items-center gap-2"
            >
              Client Portal
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div
      class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center text-gray-500 text-sm"
    >
      <p>
        &copy; {currentYear} Empower Digital Solutions. All rights reserved.
      </p>
      <div class="flex gap-6 mt-4 md:mt-0">
        <a href="/terms" class="hover:text-white transition-colors"
          >Terms & Conditions</a
        >
        <a href="/privacy" class="hover:text-white transition-colors"
          >Privacy Policy</a
        >
      </div>
    </div>

    <script>
      let deferredPrompt: any;
      const installButton = document.getElementById("installApp");

      if (installButton) {
        window.addEventListener("beforeinstallprompt", (e) => {
          // Prevent Chrome 67 and earlier from automatically showing the prompt
          e.preventDefault();
          // Stash the event so it can be triggered later.
          deferredPrompt = e;
          // Update UI to notify the user they can add to home screen
          installButton.classList.remove("hidden");
          installButton.classList.add("flex");
        });

        installButton.addEventListener("click", (e) => {
          // Hide the app provided install promotion
          installButton.classList.add("hidden");
          installButton.classList.remove("flex");
          // Show the install prompt
          if (deferredPrompt) {
            deferredPrompt.prompt();
            // Wait for the user to respond to the prompt
            deferredPrompt.userChoice.then((choiceResult: any) => {
              if (choiceResult.outcome === "accepted") {
                console.log("User accepted the A2HS prompt");
              } else {
                console.log("User dismissed the A2HS prompt");
              }
              deferredPrompt = null;
            });
          }
        });
      }
    </script>
  </div>
</footer>
