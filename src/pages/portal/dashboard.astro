---
import Layout from "../../layouts/Layout.astro";
---

<Layout title="My Project | Empower Digital Solutions">
    <div class="min-h-screen bg-slate-950 pt-24 px-6">
        <div class="container mx-auto max-w-5xl">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h1 class="text-3xl font-bold text-white">
                        Project Dashboard
                    </h1>
                    <p class="text-slate-400 mt-2">
                        Welcome back! Here is the status of your build.
                    </p>
                </div>
                <button
                    id="logout-btn"
                    class="text-slate-400 hover:text-white transition-colors"
                    >Logout</button
                >
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Status Card -->
                <div
                    class="bg-slate-900 p-6 rounded-2xl border border-slate-800"
                >
                    <h3 class="text-slate-400 text-sm font-bold uppercase mb-2">
                        Current Phase
                    </h3>
                    <p class="text-2xl font-bold text-empower-pink">
                        Development
                    </p>
                    <div class="w-full bg-slate-800 h-2 rounded-full mt-4">
                        <div
                            class="bg-empower-pink h-2 rounded-full"
                            style="width: 60%"
                        >
                        </div>
                    </div>
                </div>

                <!-- Next Milestone -->
                <div
                    class="bg-slate-900 p-6 rounded-2xl border border-slate-800"
                >
                    <h3 class="text-slate-400 text-sm font-bold uppercase mb-2">
                        Next Milestone
                    </h3>
                    <p class="text-xl font-bold text-white">Beta Release</p>
                    <p class="text-slate-500 text-sm mt-1">Due: Dec 15, 2025</p>
                </div>

                <!-- Action Items -->
                <div
                    class="bg-slate-900 p-6 rounded-2xl border border-slate-800"
                >
                    <h3 class="text-slate-400 text-sm font-bold uppercase mb-2">
                        Action Items
                    </h3>
                    <ul class="space-y-2">
                        <li
                            class="flex items-center gap-2 text-green-400 text-sm"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="w-4 h-4"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                ><polyline points="20 6 9 17 4 12"
                                ></polyline></svg
                            >
                            <span>Approve Design Mockups</span>
                        </li>
                        <li
                            class="flex items-center gap-2 text-slate-300 text-sm"
                        >
                            <div
                                class="w-4 h-4 border-2 border-slate-600 rounded-full"
                            >
                            </div>
                            <span>Provide Content for About Page</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Documents Section -->
            <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                <h2 class="text-xl font-bold text-white mb-6">
                    Project Documents
                </h2>
                <div
                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
                >
                    <div
                        class="p-4 bg-slate-800/50 rounded-xl border border-slate-700 flex items-center gap-4 hover:bg-slate-800 transition-colors cursor-pointer"
                    >
                        <div
                            class="bg-blue-900/30 p-3 rounded-lg text-blue-400"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="w-6 h-6"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                ><path
                                    d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
                                ></path><polyline points="14 2 14 8 20 8"
                                ></polyline></svg
                            >
                        </div>
                        <div>
                            <p class="font-bold text-white">Contract.pdf</p>
                            <p class="text-xs text-slate-400">
                                Signed on Nov 01, 2025
                            </p>
                        </div>
                    </div>

                    <div
                        class="p-4 bg-slate-800/50 rounded-xl border border-slate-700 flex items-center gap-4 hover:bg-slate-800 transition-colors cursor-pointer"
                    >
                        <div
                            class="bg-green-900/30 p-3 rounded-lg text-green-400"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="w-6 h-6"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                ><rect width="20" height="14" x="2" y="5" rx="2"
                                ></rect><line x1="2" x2="22" y1="10" y2="10"
                                ></line></svg
                            >
                        </div>
                        <div>
                            <p class="font-bold text-white">Invoice #1024</p>
                            <p class="text-xs text-slate-400">
                                Paid - $2,500.00
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</Layout>

<script>
    import { supabase } from "../../lib/supabase";

    // Auth Check
    const {
        data: { session },
    } = await supabase.auth.getSession();
    if (!session) {
        window.location.href = "/portal";
    }

    // Logout
    const logoutBtn = document.getElementById("logout-btn");
    if (logoutBtn) {
        logoutBtn.addEventListener("click", async () => {
            await supabase.auth.signOut();
            window.location.href = "/portal";
        });
    }
</script>
