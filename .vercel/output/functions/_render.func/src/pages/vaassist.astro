---
import Layout from '../layouts/Layout.astro';
---

<Layout title="VA Assist Demo | Empower Digital Solutions">
  <style>
    .va-demo-wrapper {
        font-family: 'Inter', sans-serif;
        /* This gradient is key to the "glass" effect */
        background: linear-gradient(135deg, #f5f7fa 0%, #d8e2ec 100%);
        overflow-x: hidden;
        min-height: 100vh;
    }

    /* --- Glassmorphism Styles --- */
    .glass-sidebar {
        background: rgba(255, 255, 255, 0.3);
        /* Frosted glass effect */
        backdrop-filter: blur(20px);
        border-right: 1px solid rgba(255, 255, 255, 0.4);
        -webkit-backdrop-filter: blur(20px);
    }

    .glass-card,
    .glass-modal-content {
        background: rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
    }

    .glass-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        background: rgba(255, 255, 255, 0.6);
    }

    /* The slide-in profile panel */
    .glass-drawer {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border-left: 1px solid rgba(255, 255, 255, 0.3);
        transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        transform: translateX(100%);
        /* Start off-screen */
    }

    .glass-drawer.open {
        transform: translateX(0);
    }

    /* Generic Modal Styles */
    .modal {
        display: none;
        /* Use 'flex' to show */
        animation: fadeIn 0.2s ease-out;
    }

    .modal-content-inner {
        animation: slideUp 0.3s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes slideUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* --- Custom App Colors (Greens & Lilacs) --- */
    .text-brand-lilac { color: #8B5CF6; }
    .bg-brand-lilac { background-color: #8B5CF6; }
    .bg-brand-lilac-light { background-color: #EDE9FE; }
    .text-brand-lilac-dark { color: #6D28D9; }
    .border-brand-lilac { border-color: #8B5CF6; }
    .hover\:bg-brand-lilac-hover:hover { background-color: #7C3AED; }

    .text-brand-green { color: #10B981; }
    .bg-brand-green { background-color: #10B981; }
    .bg-brand-green-light { background-color: #D1FAE5; }
    .text-brand-green-dark { color: #047857; }

    .bg-brand-red { background-color: #EF4444; }
    .hover\:bg-brand-red-hover:hover { background-color: #DC2626; }

    /* --- Scrollbar --- */
    .va-demo-wrapper ::-webkit-scrollbar {
        width: 6px;
    }

    .va-demo-wrapper ::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 10px;
    }

    .va-demo-wrapper ::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 0, 0, 0.2);
    }

    /* --- Page Transitions --- */
    .page-content {
        display: none;
        /* Hidden by default */
        animation: pageFadeIn 0.4s ease-in-out;
    }

    .page-content.active {
        display: block;
        /* Shown when active */
    }

    @keyframes pageFadeIn {
        from { opacity: 0; transform: translateY(15px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* --- Sidebar Navigation --- */
    .sidebar-link {
        transition: all 0.2s ease;
        position: relative;
    }

    .sidebar-link:hover {
        background: rgba(255, 255, 255, 0.4);
    }

    .sidebar-link.active {
        background: rgba(255, 255, 255, 0.7);
        color: #6D28D9;
    }

    /* Active indicator bar */
    .sidebar-link.active::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        height: 60%;
        width: 4px;
        background-color: #8B5CF6;
        border-radius: 0 4px 4px 0;
    }
  </style>

  <div class="va-demo-wrapper">
    <!-- Wrapper for Sidebar and Main Content -->
    <div class="flex h-[calc(100vh-64px)] w-full"> <!-- Adjusted height to account for main header if visible, or just full screen -->

        <!-- ======================= -->
        <!-- == 1. LEFT SIDEBAR == -->
        <!-- ======================= -->
        <nav class="glass-sidebar w-20 flex flex-col items-center flex-shrink-0 h-full py-6 space-y-6">
            <!-- Logo -->
            <a href="#" class="w-12 h-12 bg-brand-lilac rounded-xl flex items-center justify-center shadow-lg">
                <i data-lucide="sparkles" class="text-white"></i>
            </a>

            <!-- Main Navigation -->
            <div class="flex flex-col space-y-4 items-center w-full">
                <button class="sidebar-link active w-16 h-16 flex items-center justify-center rounded-xl text-gray-600" data-page="dashboard" title="Dashboard">
                    <i data-lucide="layout-grid" class="w-6 h-6"></i>
                </button>
                <button class="sidebar-link w-16 h-16 flex items-center justify-center rounded-xl text-gray-600" data-page="clients" title="Clients">
                    <i data-lucide="users" class="w-6 h-6"></i>
                </button>
                <button class="sidebar-link w-16 h-16 flex items-center justify-center rounded-xl text-gray-600" data-page="tasks" title="Tasks">
                    <i data-lucide="check-circle" class="w-6 h-6"></i>
                </button>
                <button class="sidebar-link w-16 h-16 flex items-center justify-center rounded-xl text-gray-600" data-page="timetracker" title="Time Tracker">
                    <i data-lucide="clock" class="w-6 h-6"></i>
                </button>
                <button class="sidebar-link w-16 h-16 flex items-center justify-center rounded-xl text-gray-600" data-page="content" title="Content Planner">
                    <i data-lucide="calendar-days" class="w-6 h-6"></i>
                </button>
                <button class="sidebar-link w-16 h-16 flex items-center justify-center rounded-xl text-gray-600" data-page="documents" title="Documents">
                    <i data-lucide="file-text" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Profile / User (Demo) -->
            <div class="mt-auto">
                <img src="https://placehold.co/100x100/E9D5FF/6D28D9?text=VA" alt="Demo User" class="w-12 h-12 rounded-full border-2 border-white shadow-md">
            </div>
        </nav>

        <!-- ======================= -->
        <!-- == 2. MAIN CONTENT AREA == -->
        <!-- ======================= -->
        <main class="flex-1 h-full overflow-y-auto p-8 md:p-12">

            <!-- Dev Note for your portfolio -->
            <div class="glass-card mb-8 p-4 border-l-4 border-brand-lilac">
                <h4 class="font-bold text-brand-lilac-dark">Portfolio Dev Note:</h4>
                <p class="text-gray-700">This is an interactive demo of the "VAAssist" platform. It showcases the UI and system concepts. Features like the Time Tracker, Add Task, and Document Generator are interactive. Click around to explore!</p>
            </div>

            <!-- ======================= -->
            <!-- == DASHBOARD (Main Hub) PAGE == -->
            <!-- ======================= -->
            <div id="dashboard-page" class="page-content active">
                <header class="mb-8">
                    <h1 class="text-4xl font-extrabold text-gray-800">Main Hub</h1>
                    <p class="text-lg text-gray-600">Welcome back, let's get productive.</p>
                </header>

                <!-- Grid of cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Today's Schedule -->
                    <div class="glass-card rounded-2xl p-6 md:col-span-2">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Today's Schedule</h3>
                        <div class="space-y-4">
                            <div class="flex items-center gap-4">
                                <span class="text-sm font-semibold text-gray-600 w-20">09:00 AM</span>
                                <div class="h-10 w-1 bg-brand-green rounded-full"></div>
                                <div>
                                    <h4 class="font-semibold text-gray-700">Client Onboarding Call</h4>
                                    <p class="text-sm text-gray-500">Acme Corporation (John Doe)</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-4">
                                <span class="text-sm font-semibold text-gray-600 w-20">11:00 AM</span>
                                <div class="h-10 w-1 bg-brand-lilac rounded-full"></div>
                                <div>
                                    <h4 class="font-semibold text-gray-700">Draft Social Media Posts</h4>
                                    <p class="text-sm text-gray-500">For Beta LLC (Jane Smith)</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-4 opacity-50">
                                <span class="text-sm font-semibold text-gray-600 w-20">02:00 PM</span>
                                <div class="h-10 w-1 bg-gray-300 rounded-full"></div>
                                <div>
                                    <h4 class="font-semibold text-gray-700">Quarterly Report Prep</h4>
                                    <p class="text-sm text-gray-500">Internal Task</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Quick Actions</h3>
                        <div class="flex flex-col space-y-3">
                            <button id="quick-start-timer-btn" class="bg-brand-lilac text-white font-medium py-3 px-4 rounded-xl shadow-lg hover:bg-brand-lilac-hover transition-all flex items-center justify-center gap-2">
                                <i data-lucide="play" class="w-5 h-5"></i>
                                <span>Start Time Tracker</span>
                            </button>
                            <button id="quick-add-task-btn" class="bg-white text-gray-700 border border-gray-200 font-medium py-3 px-4 rounded-xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2">
                                <i data-lucide="plus" class="w-5 h-5"></i>
                                <span>Add New Task</span>
                            </button>
                            <button class="bg-white text-gray-700 border border-gray-200 font-medium py-3 px-4 rounded-xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2 sidebar-link" data-page="clients">
                                <i data-lucide="user-plus" class="w-5 h-5"></i>
                                <span>Add New Client</span>
                            </button>
                        </div>
                    </div>

                    <!-- Clients Card -->
                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Recent Clients</h3>
                        <div class="space-y-3">
                            <a href="#" class="flex items-center gap-3 p-2 rounded-lg hover:bg-white/50" data-client="jane">
                                <span class="w-10 h-10 rounded-full bg-brand-green-light text-brand-green-dark font-semibold flex items-center justify-center">JS</span>
                                <span class="font-medium text-gray-700">Jane Smith (Beta LLC)</span>
                            </a>
                            <a href="#" class="flex items-center gap-3 p-2 rounded-lg hover:bg-white/50" data-client="john">
                                <span class="w-10 h-10 rounded-full bg-brand-lilac-light text-brand-lilac-dark font-semibold flex items-center justify-center">JD</span>
                                <span class="font-medium text-gray-700">John Doe (Acme Corp)</span>
                            </a>
                        </div>
                    </div>

                    <!-- Tasks Card -->
                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Upcoming To-dos</h3>
                        <div class="space-y-3">
                            <div class="flex items-start gap-3">
                                <input type="checkbox" class="mt-1 h-5 w-5 rounded border-gray-300 text-brand-lilac focus:ring-brand-lilac">
                                <div>
                                    <h4 class="font-medium text-gray-700">Website Content Update</h4>
                                    <span class="text-sm text-brand-green-dark bg-brand-green-light py-0.5 px-2 rounded-full">Beta LLC</span>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <input type="checkbox" class="mt-1 h-5 w-5 rounded border-gray-300 text-brand-lilac focus:ring-brand-lilac">
                                <div>
                                    <h4 class="font-medium text-gray-700">Prepare Quarterly Report</h4>
                                    <span class="text-sm text-brand-lilac-dark bg-brand-lilac-light py-0.5 px-2 rounded-full">Acme Corp</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ======================= -->
            <!-- == CLIENTS PAGE == -->
            <!-- ======================= -->
            <div id="clients-page" class="page-content">
                <header class="flex items-center justify-between mb-8">
                    <div>
                        <h1 class="text-4xl font-extrabold text-gray-800">Clients</h1>
                        <p class="text-lg text-gray-600">Manage all your client information.</p>
                    </div>
                    <button class="bg-brand-lilac text-white font-medium py-3 px-5 rounded-xl shadow-lg hover:bg-brand-lilac-hover transition-all flex items-center gap-2">
                        <i data-lucide="plus" class="w-5 h-5"></i>
                        <span>Add Client</span>
                    </button>
                </header>

                <!-- Client Card Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="glass-card rounded-2xl p-6 cursor-pointer" data-client="jane">
                        <div class="flex items-center justify-between mb-4">
                            <span class="w-12 h-12 rounded-full bg-brand-green-light text-brand-green-dark font-bold flex items-center justify-center text-lg">JS</span>
                            <span class="text-xs font-medium bg-brand-green-light text-brand-green-dark py-1 px-3 rounded-full">Active</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Jane Smith</h3>
                        <p class="text-brand-lilac-dark font-medium mb-4">Beta LLC</p>
                        <p class="text-sm text-gray-600 mb-1"><i data-lucide="mail" class="w-4 h-4 inline-block mr-2 -mt-1"></i>jane.smith@beta.llc</p>
                        <p class="text-sm text-gray-600"><i data-lucide="phone" class="w-4 h-4 inline-block mr-2 -mt-1"></i>+44-20-7946-0958</p>
                    </div>

                    <div class="glass-card rounded-2xl p-6 cursor-pointer" data-client="john">
                        <div class="flex items-center justify-between mb-4">
                            <span class="w-12 h-12 rounded-full bg-brand-lilac-light text-brand-lilac-dark font-bold flex items-center justify-center text-lg">JD</span>
                            <span class="text-xs font-medium bg-brand-green-light text-brand-green-dark py-1 px-3 rounded-full">Active</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">John Doe</h3>
                        <p class="text-brand-lilac-dark font-medium mb-4">Acme Corporation</p>
                        <p class="text-sm text-gray-600 mb-1"><i data-lucide="mail" class="w-4 h-4 inline-block mr-2 -mt-1"></i>john.doe@acme.com</p>
                        <p class="text-sm text-gray-600"><i data-lucide="phone" class="w-4 h-4 inline-block mr-2 -mt-1"></i>+1-555-123-4567</p>
                    </div>

                    <div class="glass-card rounded-2xl p-6">
                        <div class="flex items-center justify-between mb-4">
                            <span class="w-12 h-12 rounded-full bg-pink-100 text-pink-700 font-bold flex items-center justify-center text-lg">NB</span>
                            <span class="text-xs font-medium bg-gray-200 text-gray-600 py-1 px-3 rounded-full">Onboarding</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Nicola Berry</h3>
                        <p class="text-brand-lilac-dark font-medium mb-4">Empower VA Services</p>
                        <p class="text-sm text-gray-600 mb-1"><i data-lucide="mail" class="w-4 h-4 inline-block mr-2 -mt-1"></i>nicola@empower.co.uk</p>
                        <p class="text-sm text-gray-600"><i data-lucide="phone" class="w-4 h-4 inline-block mr-2 -mt-1"></i>07557988549</p>
                    </div>
                </div>
            </div>

            <!-- ======================= -->
            <!-- == TASKS PAGE == -->
            <!-- ======================= -->
            <div id="tasks-page" class="page-content">
                <header class="flex items-center justify-between mb-8">
                    <div>
                        <h1 class="text-4xl font-extrabold text-gray-800">Tasks</h1>
                        <p class="text-lg text-gray-600">Drag and drop to manage your workflow.</p>
                    </div>
                    <button id="add-task-btn-trigger" class="bg-brand-lilac text-white font-medium py-3 px-5 rounded-xl shadow-lg hover:bg-brand-lilac-hover transition-all flex items-center gap-2">
                        <i data-lucide="plus" class="w-5 h-5"></i>
                        <span>Add Task</span>
                    </button>
                </header>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- To Do -->
                    <div class="bg-gray-100/50 rounded-2xl p-4">
                        <h3 class="font-bold text-gray-700 mb-4 ml-2">To Do</h3>
                        <div id="todo-column-content" class="space-y-3">
                            <div class="glass-card rounded-xl p-4 shadow-sm">
                                <h4 class="font-medium text-gray-800">Draft blog post "5 AI Tools"</h4>
                                <span class="text-xs text-brand-lilac-dark bg-brand-lilac-light py-0.5 px-2 rounded-full">Content</span>
                            </div>
                            <div class="glass-card rounded-xl p-4 shadow-sm">
                                <h4 class="font-medium text-gray-800">Send updated contract</h4>
                                <span class="text-xs text-brand-green-dark bg-brand-green-light py-0.5 px-2 rounded-full">Beta LLC</span>
                            </div>
                        </div>
                    </div>
                    <!-- In Progress -->
                    <div class="bg-gray-100/50 rounded-2xl p-4">
                        <h3 class="font-bold text-gray-700 mb-4 ml-2">In Progress</h3>
                        <div class="space-y-3">
                            <div class="glass-card rounded-xl p-4 shadow-sm">
                                <h4 class="font-medium text-gray-800">Website Content Update</h4>
                                <span class="text-xs text-brand-green-dark bg-brand-green-light py-0.5 px-2 rounded-full">Beta LLC</span>
                            </div>
                        </div>
                    </div>
                    <!-- Done -->
                    <div class="bg-gray-100/50 rounded-2xl p-4">
                        <h3 class="font-bold text-gray-700 mb-4 ml-2">Done</h3>
                        <div class="space-y-3 opacity-60">
                            <div class="glass-card rounded-xl p-4 shadow-sm">
                                <h4 class="font-medium text-gray-800 line-through">Quarterly Report</h4>
                                <span class="text-xs text-brand-lilac-dark bg-brand-lilac-light py-0.5 px-2 rounded-full">Acme Corp</span>
                            </div>
                            <div class="glass-card rounded-xl p-4 shadow-sm">
                                <h4 class="font-medium text-gray-800 line-through">Onboard Nicola Berry</h4>
                                <span class="text-xs text-gray-600 bg-gray-200 py-0.5 px-2 rounded-full">Onboarding</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ======================= -->
            <!-- == TIME TRACKER == -->
            <!-- ======================= -->
            <div id="timetracker-page" class="page-content">
                <header class="mb-8">
                    <h1 class="text-4xl font-extrabold text-gray-800">Time Tracker</h1>
                    <p class="text-lg text-gray-600">Track your billable hours with one click.</p>
                </header>
                <div class="glass-card rounded-2xl p-8 max-w-lg mx-auto text-center">
                    <h3 id="timer-project-name" class="text-xl font-bold text-gray-800 mb-2">Project: Website Update</h3>
                    <p id="timer-client-name" class="text-brand-green-dark mb-6">Client: Beta LLC</p>
                    <div id="timer-display" class="text-6xl font-extrabold text-gray-800 mb-8">00:00:00</div>
                    <div class="flex space-x-4">
                        <button id="timer-toggle-btn" class="w-full bg-brand-green text-white font-medium py-4 px-6 rounded-xl shadow-lg hover:bg-emerald-600 transition-all text-lg flex items-center justify-center gap-3">
                            <span id="timer-play-icon"><i data-lucide="play-circle" class="w-6 h-6"></i></span>
                            <span id="timer-pause-icon" class="hidden"><i data-lucide="pause-circle" class="w-6 h-6"></i></span>
                            <span id="timer-toggle-text">Start Timer</span>
                        </button>
                        <button id="timer-reset-btn" class="flex-shrink-0 bg-gray-200 text-gray-700 font-medium p-4 rounded-xl shadow-sm hover:bg-gray-300 transition-all">
                            <i data-lucide="rotate-ccw" class="w-6 h-6"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ======================= -->
            <!-- == CONTENT == -->
            <!-- ======================= -->
            <div id="content-page" class="page-content">
                <header class="mb-8">
                    <h1 class="text-4xl font-extrabold text-gray-800">Content Planner</h1>
                    <p class="text-lg text-gray-600">Plan and schedule your social media content.</p>
                </header>
                <div class="glass-card rounded-2xl p-6">
                    <p class="text-gray-700">This page would feature a full calendar grid for planning social media posts. For this demo, we're focusing on the Client Management flow.</p>
                </div>
            </div>

            <!-- ======================= -->
            <!-- == DOCUMENTS == -->
            <!-- ======================= -->
            <div id="documents-page" class="page-content">
                <header class="mb-8">
                    <h1 class="text-4xl font-extrabold text-gray-800">Document Automation</h1>
                    <p class="text-lg text-gray-600">Manage your quotes, contracts, and templates.</p>
                </header>
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Document Generator</h3>
                    <p class="text-gray-700 mb-6">This simulator demonstrates how client data can be automatically merged with templates to create new documents, showcasing the "Empower Automation" service.</p>
                    <button id="doc-gen-trigger-btn" class="bg-brand-lilac text-white font-medium py-3 px-5 rounded-xl shadow-lg hover:bg-brand-lilac-hover transition-all flex items-center gap-2">
                        <i data-lucide="file-plus-2" class="w-5 h-5"></i>
                        <span>Generate New Document</span>
                    </button>
                </div>
            </div>

        </main>
    </div>

    <!-- =================================== -->
    <!-- == MODALS (Pop-ups) START HERE == -->
    <!-- =================================== -->

    <!-- ======================= -->
    <!-- == SLIDE-IN CLIENT PROFILE (Modal) == -->
    <!-- ======================= -->
    <div id="client-profile-drawer" class="glass-drawer fixed top-0 right-0 z-50 w-full max-w-2xl h-full shadow-2xl">
        <div class="flex h-full">
            <!-- Internal Sidebar -->
            <div class="w-48 bg-white/30 p-6 flex-shrink-0">
                <div class="flex items-center gap-3 mb-8">
                    <span id="client-drawer-initials" class="w-10 h-10 rounded-full bg-brand-green-light text-brand-green-dark font-bold flex items-center justify-center text-lg"></span>
                    <h2 id="client-drawer-name" class="text-xl font-bold text-gray-800"></h2>
                </div>
                <nav class="flex flex-col space-y-2">
                    <a href="#" class="font-medium text-brand-lilac-dark bg-brand-lilac-light py-2 px-3 rounded-lg flex items-center gap-2">
                        <i data-lucide="user" class="w-5 h-5"></i> Profile
                    </a>
                    <a href="#" class="font-medium text-gray-600 hover:bg-white/50 py-2 px-3 rounded-lg flex items-center gap-2">
                        <i data-lucide="file-text" class="w-5 h-5"></i> Documents
                    </a>
                    <a href="#" class="font-medium text-gray-600 hover:bg-white/50 py-2 px-3 rounded-lg flex items-center gap-2">
                        <i data-lucide="calendar" class="w-5 h-5"></i> Events
                    </a>
                    <a href="#" class="font-medium text-gray-600 hover:bg-white/50 py-2 px-3 rounded-lg flex items-center gap-2">
                        <i data-lucide="check-square" class="w-5 h-5"></i> To-dos
                    </a>
                    <a href="#" class="font-medium text-gray-600 hover:bg-white/50 py-2 px-3 rounded-lg flex items-center gap-2">
                        <i data-lucide="clock" class="w-5 h-5"></i> Timekeeper
                    </a>
                </nav>
            </div>

            <!-- Drawer Content -->
            <div class="flex-1 p-8 overflow-y-auto">
                <header class="flex justify-between items-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-800">Client Profile</h3>
                    <button id="close-drawer-btn" class="text-gray-500 hover:text-gray-800 hover:bg-white/50 rounded-full p-2">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </header>

                <div class="space-y-6">
                    <div>
                        <label class="text-sm font-medium text-gray-500">Email Addresses</label>
                        <p id="client-drawer-email" class="text-lg font-medium text-gray-800"></p>
                    </div>
                    <div>
                        <label class="text-sm font-medium text-gray-500">Phone Numbers</label>
                        <p id="client-drawer-phone" class="text-lg font-medium text-gray-800"></p>
                    </div>
                    <div>
                        <label class="text-sm font-medium text-gray-500">Company Name</label>
                        <p id="client-drawer-company" class="text-lg font-medium text-gray-800"></p>
                    </div>
                    <div>
                        <label class="text-sm font-medium text-gray-500">Industry</label>
                        <p id="client-drawer-industry" class="text-lg font-medium text-gray-800"></p>
                    </div>
                    <div>
                        <label class="text-sm font-medium text-gray-500">Client Since</label>
                        <p id="client-drawer-since" class="text-lg font-medium text-gray-800"></p>
                    </div>
                    <div>
                        <label class="text-sm font-medium text-gray-500">Notes</label>
                        <p id="client-drawer-notes" class="text-lg font-medium text-gray-800 bg-white/50 p-4 rounded-lg border border-gray-200"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Backdrop for the drawer -->
    <div id="drawer-overlay" class="fixed inset-0 bg-black/20 z-40 hidden"></div>

    <!-- ======================= -->
    <!-- == NEW: ADD TASK MODAL == -->
    <!-- ======================= -->
    <div id="add-task-modal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-overlay fixed inset-0 bg-black/50 backdrop-blur-sm"></div>
        <div class="modal-content-inner glass-modal-content p-8 rounded-2xl shadow-xl w-full max-w-lg z-10">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Add New Task</h2>
                <button class="modal-close text-gray-500 hover:text-gray-800">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <form id="add-task-form" class="space-y-4">
                <div>
                    <label for="new-task-title" class="block text-sm font-medium text-gray-700 mb-1">Task Title</label>
                    <input type="text" id="new-task-title" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-brand-lilac focus:border-brand-lilac" placeholder="e.g., Draft blog post">
                </div>
                <div>
                    <label for="new-task-client" class="block text-sm font-medium text-gray-700 mb-1">Assign to Client</label>
                    <select id="new-task-client" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-brand-lilac focus:border-brand-lilac">
                        <option value="jane">Jane Smith (Beta LLC)</option>
                        <option value="john">John Doe (Acme Corp)</option>
                        <option value="internal">Internal Task</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-3 pt-4">
                    <button type="button" class="modal-close bg-gray-100 text-gray-700 font-medium py-2 px-5 rounded-lg hover:bg-gray-200 transition-colors">
                        Cancel
                    </button>
                    <button id="save-task-btn" type="submit" class="bg-brand-lilac text-white font-medium py-2 px-5 rounded-lg shadow-sm hover:bg-brand-lilac-hover transition-colors">
                        Save Task
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ======================= -->
    <!-- == NEW: DOC GEN MODAL == -->
    <!-- ======================= -->
    <div id="doc-gen-modal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-overlay fixed inset-0 bg-black/50 backdrop-blur-sm"></div>
        <div class="modal-content-inner glass-modal-content p-8 rounded-2xl shadow-xl w-full max-w-lg z-10">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Generate Document</h2>
                <button class="modal-close text-gray-500 hover:text-gray-800">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <form id="doc-gen-form" class="space-y-4">
                <div>
                    <label for="doc-template-select" class="block text-sm font-medium text-gray-700 mb-1">Select Template</label>
                    <select id="doc-template-select" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-brand-lilac focus:border-brand-lilac">
                        <option value="Service Agreement">Service Agreement</option>
                        <option value="Project Quote">Project Quote</option>
                        <option value="NDA">Non-Disclosure Agreement</option>
                    </select>
                </div>
                <div>
                    <label for="doc-client-select" class="block text-sm font-medium text-gray-700 mb-1">Select Client</label>
                    <select id="doc-client-select" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-brand-lilac focus:border-brand-lilac">
                        <option value="jane">Jane Smith (Beta LLC)</option>
                        <option value="john">John Doe (Acme Corp)</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-3 pt-4">
                    <button type="button" class="modal-close bg-gray-100 text-gray-700 font-medium py-2 px-5 rounded-lg hover:bg-gray-200 transition-colors">
                        Cancel
                    </button>
                    <button id="generate-doc-btn" type="submit" class="bg-brand-lilac text-white font-medium py-2 px-5 rounded-lg shadow-sm hover:bg-brand-lilac-hover transition-colors">
                        Generate
                    </button>
                </div>
            </form>
        </div>
    </div>
  </div>

  <script>
    // Initialize Lucide icons
    // @ts-ignore
    if (typeof lucide !== 'undefined') {
        // @ts-ignore
        lucide.createIcons();
    }

    document.addEventListener('DOMContentLoaded', () => {
        // Re-run createIcons on load just in case
        // @ts-ignore
        if (typeof lucide !== 'undefined') lucide.createIcons();

        // --- Navigation Logic ---
        const sidebarLinks = document.querySelectorAll('.sidebar-link');
        const pages = document.querySelectorAll('.page-content');

        sidebarLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                const targetPageId = (e.currentTarget as HTMLElement).dataset.page;
                
                // Update Sidebar Active State
                sidebarLinks.forEach(l => l.classList.remove('active'));
                (e.currentTarget as HTMLElement).classList.add('active');

                // Show Target Page
                pages.forEach(page => {
                    if (page.id === `${targetPageId}-page`) {
                        page.classList.add('active');
                    } else {
                        page.classList.remove('active');
                    }
                });
            });
        });

        // --- Quick Action Buttons Logic ---
        const quickStartBtn = document.getElementById('quick-start-timer-btn');
        const quickAddTaskBtn = document.getElementById('quick-add-task-btn');

        if (quickStartBtn) {
            quickStartBtn.addEventListener('click', () => {
                // Simulate clicking the "Time Tracker" sidebar link
                const timeTrackerLink = document.querySelector('.sidebar-link[data-page="timetracker"]') as HTMLElement;
                if (timeTrackerLink) timeTrackerLink.click();
            });
        }

        if (quickAddTaskBtn) {
            quickAddTaskBtn.addEventListener('click', () => {
                // Open the Add Task Modal
                const addTaskModal = document.getElementById('add-task-modal');
                if (addTaskModal) addTaskModal.style.display = 'flex';
            });
        }

        // --- Modal Logic (Generic) ---
        const modals = document.querySelectorAll('.modal');
        const modalCloseBtns = document.querySelectorAll('.modal-close');
        const modalOverlays = document.querySelectorAll('.modal-overlay');

        const closeModal = (modal: Element) => {
            (modal as HTMLElement).style.display = 'none';
        };

        modalCloseBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                const modal = (e.target as HTMLElement).closest('.modal');
                if (modal) closeModal(modal);
            });
        });

        modalOverlays.forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                const modal = (e.target as HTMLElement).closest('.modal');
                if (modal) closeModal(modal);
            });
        });

        // --- Add Task Modal Specifics ---
        const addTaskTrigger = document.getElementById('add-task-btn-trigger');
        const addTaskModal = document.getElementById('add-task-modal');
        const addTaskForm = document.getElementById('add-task-form');
        const todoColumnContent = document.getElementById('todo-column-content');

        if (addTaskTrigger && addTaskModal) {
            addTaskTrigger.addEventListener('click', () => {
                addTaskModal.style.display = 'flex';
            });
        }

        if (addTaskForm) {
            addTaskForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const titleInput = document.getElementById('new-task-title') as HTMLInputElement;
                const clientSelect = document.getElementById('new-task-client') as HTMLSelectElement;
                
                const title = titleInput.value;
                const client = clientSelect.options[clientSelect.selectedIndex].text;
                
                // Create new task card HTML
                const newTaskHTML = `
                    <div class="glass-card rounded-xl p-4 shadow-sm">
                        <h4 class="font-medium text-gray-800">${title}</h4>
                        <span class="text-xs text-brand-lilac-dark bg-brand-lilac-light py-0.5 px-2 rounded-full">${client}</span>
                    </div>
                `;

                // Append to "To Do" column
                if (todoColumnContent) todoColumnContent.insertAdjacentHTML('afterbegin', newTaskHTML);

                // Reset and Close
                addTaskForm.reset();
                if (addTaskModal) closeModal(addTaskModal);
            });
        }

        // --- Document Generator Modal Specifics ---
        const docGenTrigger = document.getElementById('doc-gen-trigger-btn');
        const docGenModal = document.getElementById('doc-gen-modal');
        const docGenForm = document.getElementById('doc-gen-form');

        if (docGenTrigger && docGenModal) {
            docGenTrigger.addEventListener('click', () => {
                docGenModal.style.display = 'flex';
            });
        }

        if (docGenForm) {
            docGenForm.addEventListener('submit', (e) => {
                e.preventDefault();
                // Simulate generation
                const btn = document.getElementById('generate-doc-btn');
                if (btn) {
                    const originalText = btn.innerText;
                    btn.innerText = 'Generating...';
                    setTimeout(() => {
                        btn.innerText = 'Done! (Downloaded)';
                        setTimeout(() => {
                            if (docGenModal) closeModal(docGenModal);
                            btn.innerText = originalText;
                        }, 1000);
                    }, 1500);
                }
            });
        }


        // --- Client Drawer Logic ---
        const clientCards = document.querySelectorAll('[data-client]');
        const drawer = document.getElementById('client-profile-drawer');
        const drawerOverlay = document.getElementById('drawer-overlay');
        const closeDrawerBtn = document.getElementById('close-drawer-btn');

        // Mock Data
        const clientData: Record<string, any> = {
            jane: {
                name: 'Jane Smith',
                initials: 'JS',
                email: 'jane.smith@beta.llc',
                phone: '+44 20 7946 0958',
                company: 'Beta LLC',
                industry: 'Marketing Agency',
                since: 'March 2024',
                notes: 'Prefers weekly updates via email. Key focus: Social media growth.'
            },
            john: {
                name: 'John Doe',
                initials: 'JD',
                email: 'john.doe@acme.com',
                phone: '+1 555 123 4567',
                company: 'Acme Corporation',
                industry: 'Manufacturing',
                since: 'January 2024',
                notes: 'Quarterly reports are critical. Contact via PA for scheduling.'
            }
        };

        const openDrawer = (clientId: string) => {
            const data = clientData[clientId];
            if (!data || !drawer || !drawerOverlay) return;

            // Populate Drawer
            const nameEl = document.getElementById('client-drawer-name');
            const initialsEl = document.getElementById('client-drawer-initials');
            const emailEl = document.getElementById('client-drawer-email');
            const phoneEl = document.getElementById('client-drawer-phone');
            const companyEl = document.getElementById('client-drawer-company');
            const industryEl = document.getElementById('client-drawer-industry');
            const sinceEl = document.getElementById('client-drawer-since');
            const notesEl = document.getElementById('client-drawer-notes');

            if (nameEl) nameEl.innerText = data.name;
            if (initialsEl) initialsEl.innerText = data.initials;
            if (emailEl) emailEl.innerText = data.email;
            if (phoneEl) phoneEl.innerText = data.phone;
            if (companyEl) companyEl.innerText = data.company;
            if (industryEl) industryEl.innerText = data.industry;
            if (sinceEl) sinceEl.innerText = data.since;
            if (notesEl) notesEl.innerText = data.notes;

            // Show
            drawer.classList.add('open');
            drawerOverlay.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        };

        const closeDrawer = () => {
            if (drawer) drawer.classList.remove('open');
            if (drawerOverlay) drawerOverlay.classList.add('hidden');
            document.body.style.overflow = '';
        };

        clientCards.forEach(card => {
            card.addEventListener('click', (e) => {
                const clientId = (e.currentTarget as HTMLElement).dataset.client;
                if (clientId) openDrawer(clientId);
            });
        });

        if (closeDrawerBtn) closeDrawerBtn.addEventListener('click', closeDrawer);
        if (drawerOverlay) drawerOverlay.addEventListener('click', closeDrawer);

        // --- Time Tracker Logic ---
        let timerInterval: any;
        let seconds = 0;
        let isRunning = false;

        const timerDisplay = document.getElementById('timer-display');
        const timerToggleBtn = document.getElementById('timer-toggle-btn');
        const timerResetBtn = document.getElementById('timer-reset-btn');
        const playIcon = document.getElementById('timer-play-icon');
        const pauseIcon = document.getElementById('timer-pause-icon');
        const toggleText = document.getElementById('timer-toggle-text');

        const formatTime = (totalSeconds: number) => {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const secs = totalSeconds % 60;
            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        };

        if (timerToggleBtn) {
            timerToggleBtn.addEventListener('click', () => {
                if (isRunning) {
                    // Pause
                    clearInterval(timerInterval);
                    isRunning = false;
                    if (playIcon) playIcon.classList.remove('hidden');
                    if (pauseIcon) pauseIcon.classList.add('hidden');
                    if (toggleText) toggleText.innerText = 'Resume Timer';
                    timerToggleBtn.classList.remove('bg-red-500', 'hover:bg-red-600');
                    timerToggleBtn.classList.add('bg-brand-green', 'hover:bg-emerald-600');
                } else {
                    // Start
                    isRunning = true;
                    if (playIcon) playIcon.classList.add('hidden');
                    if (pauseIcon) pauseIcon.classList.remove('hidden');
                    if (toggleText) toggleText.innerText = 'Stop Timer';
                    timerToggleBtn.classList.remove('bg-brand-green', 'hover:bg-emerald-600');
                    timerToggleBtn.classList.add('bg-red-500', 'hover:bg-red-600');

                    timerInterval = setInterval(() => {
                        seconds++;
                        if (timerDisplay) timerDisplay.innerText = formatTime(seconds);
                    }, 1000);
                }
            });
        }

        if (timerResetBtn) {
            timerResetBtn.addEventListener('click', () => {
                clearInterval(timerInterval);
                isRunning = false;
                seconds = 0;
                if (timerDisplay) timerDisplay.innerText = "00:00:00";
                if (playIcon) playIcon.classList.remove('hidden');
                if (pauseIcon) pauseIcon.classList.add('hidden');
                if (toggleText) toggleText.innerText = 'Start Timer';
                if (timerToggleBtn) {
                    timerToggleBtn.classList.remove('bg-red-500', 'hover:bg-red-600');
                    timerToggleBtn.classList.add('bg-brand-green', 'hover:bg-emerald-600');
                }
            });
        }

    });
  </script>
</Layout>
