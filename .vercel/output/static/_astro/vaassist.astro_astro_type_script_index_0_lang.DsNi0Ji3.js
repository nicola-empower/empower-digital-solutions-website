typeof lucide<"u"&&lucide.createIcons();document.addEventListener("DOMContentLoaded",()=>{typeof lucide<"u"&&lucide.createIcons();const L=document.querySelectorAll(".sidebar-link"),$=document.querySelectorAll(".page-content");L.forEach(t=>{t.addEventListener("click",e=>{const n=e.currentTarget.dataset.page;L.forEach(d=>d.classList.remove("active")),e.currentTarget.classList.add("active"),$.forEach(d=>{d.id===`${n}-page`?d.classList.add("active"):d.classList.remove("active")})})});const h=document.getElementById("quick-start-timer-btn"),T=document.getElementById("quick-add-task-btn");h&&h.addEventListener("click",()=>{const t=document.querySelector('.sidebar-link[data-page="timetracker"]');t&&t.click()}),T&&T.addEventListener("click",()=>{const t=document.getElementById("add-task-modal");t&&(t.style.display="flex")}),document.querySelectorAll(".modal");const j=document.querySelectorAll(".modal-close"),J=document.querySelectorAll(".modal-overlay"),r=t=>{t.style.display="none"};j.forEach(t=>{t.addEventListener("click",e=>{const n=e.target.closest(".modal");n&&r(n)})}),J.forEach(t=>{t.addEventListener("click",e=>{const n=e.target.closest(".modal");n&&r(n)})});const k=document.getElementById("add-task-btn-trigger"),l=document.getElementById("add-task-modal"),v=document.getElementById("add-task-form"),B=document.getElementById("todo-column-content");k&&l&&k.addEventListener("click",()=>{l.style.display="flex"}),v&&v.addEventListener("submit",t=>{t.preventDefault();const e=document.getElementById("new-task-title"),n=document.getElementById("new-task-client"),d=e.value,y=n.options[n.selectedIndex].text,E=`
                    <div class="glass-card rounded-xl p-4 shadow-sm">
                        <h4 class="font-medium text-gray-800">${d}</h4>
                        <span class="text-xs text-brand-lilac-dark bg-brand-lilac-light py-0.5 px-2 rounded-full">${y}</span>
                    </div>
                `;B&&B.insertAdjacentHTML("afterbegin",E),v.reset(),l&&r(l)});const b=document.getElementById("doc-gen-trigger-btn"),m=document.getElementById("doc-gen-modal"),x=document.getElementById("doc-gen-form");b&&m&&b.addEventListener("click",()=>{m.style.display="flex"}),x&&x.addEventListener("submit",t=>{t.preventDefault();const e=document.getElementById("generate-doc-btn");if(e){const n=e.innerText;e.innerText="Generating...",setTimeout(()=>{e.innerText="Done! (Downloaded)",setTimeout(()=>{m&&r(m),e.innerText=n},1e3)},1500)}});const G=document.querySelectorAll("[data-client]"),u=document.getElementById("client-profile-drawer"),a=document.getElementById("drawer-overlay"),w=document.getElementById("close-drawer-btn"),O={jane:{name:"Jane Smith",initials:"JS",email:"jane.smith@beta.llc",phone:"+44 20 7946 0958",company:"Beta LLC",industry:"Marketing Agency",since:"March 2024",notes:"Prefers weekly updates via email. Key focus: Social media growth."},john:{name:"John Doe",initials:"JD",email:"john.doe@acme.com",phone:"+1 555 123 4567",company:"Acme Corporation",industry:"Manufacturing",since:"January 2024",notes:"Quarterly reports are critical. Contact via PA for scheduling."}},P=t=>{const e=O[t];if(!e||!u||!a)return;const n=document.getElementById("client-drawer-name"),d=document.getElementById("client-drawer-initials"),y=document.getElementById("client-drawer-email"),E=document.getElementById("client-drawer-phone"),M=document.getElementById("client-drawer-company"),q=document.getElementById("client-drawer-industry"),A=document.getElementById("client-drawer-since"),C=document.getElementById("client-drawer-notes");n&&(n.innerText=e.name),d&&(d.innerText=e.initials),y&&(y.innerText=e.email),E&&(E.innerText=e.phone),M&&(M.innerText=e.company),q&&(q.innerText=e.industry),A&&(A.innerText=e.since),C&&(C.innerText=e.notes),u.classList.add("open"),a.classList.remove("hidden"),document.body.style.overflow="hidden"},S=()=>{u&&u.classList.remove("open"),a&&a.classList.add("hidden"),document.body.style.overflow=""};G.forEach(t=>{t.addEventListener("click",e=>{const n=e.currentTarget.dataset.client;n&&P(n)})}),w&&w.addEventListener("click",S),a&&a.addEventListener("click",S);let p,I=0,g=!1;const f=document.getElementById("timer-display"),i=document.getElementById("timer-toggle-btn"),D=document.getElementById("timer-reset-btn"),c=document.getElementById("timer-play-icon"),o=document.getElementById("timer-pause-icon"),s=document.getElementById("timer-toggle-text"),R=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),d=t%60;return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(d).padStart(2,"0")}`};i&&i.addEventListener("click",()=>{g?(clearInterval(p),g=!1,c&&c.classList.remove("hidden"),o&&o.classList.add("hidden"),s&&(s.innerText="Resume Timer"),i.classList.remove("bg-red-500","hover:bg-red-600"),i.classList.add("bg-brand-green","hover:bg-emerald-600")):(g=!0,c&&c.classList.add("hidden"),o&&o.classList.remove("hidden"),s&&(s.innerText="Stop Timer"),i.classList.remove("bg-brand-green","hover:bg-emerald-600"),i.classList.add("bg-red-500","hover:bg-red-600"),p=setInterval(()=>{I++,f&&(f.innerText=R(I))},1e3))}),D&&D.addEventListener("click",()=>{clearInterval(p),g=!1,I=0,f&&(f.innerText="00:00:00"),c&&c.classList.remove("hidden"),o&&o.classList.add("hidden"),s&&(s.innerText="Start Timer"),i&&(i.classList.remove("bg-red-500","hover:bg-red-600"),i.classList.add("bg-brand-green","hover:bg-emerald-600"))})});
